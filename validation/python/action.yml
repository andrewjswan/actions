name: ğŸ§¹ Python Ruff
inputs:
  token:
    description: Github Token
    required: false
runs:
  using: "composite"
  steps:
    - name: ğŸ Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: "3.x"

    - name: â¤µï¸ Check out requirements
      uses: actions/checkout@v4
      with:
        repository: andrewjswan/actions
        sparse-checkout: .github/requirements.txt
        path: pip

    - name: ğŸ“¦ Install requirements
      run: python3 -m pip install -r pip/.github/requirements.txt --no-deps
      shell: bash

    - name: âš™ï¸ Lint
      run: python3 -m ruff check .
      shell: bash

    - name: ğŸ’… Format
      run: python3 -m ruff format . --check
      shell: bash

    - name: ğŸ’… Format Diff
      if: failure()
      run: python3 -m ruff format . --check --diff
      shell: bash
